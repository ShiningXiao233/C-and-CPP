# 心血来潮写一个判题机

## 1.0  2023/7/12

脑子里一片浆糊，不知道先做什么，就随便找个点开始。毫无逻辑。\
这时候的设计是，先实现C语言实现一个程序的运行，顺便搞搞并发。\
实在没有想到如何用C语言实现一个C语言的编译运行。。。。 \
最后还是用上了`system`去调用shell去执行。直接用shell的`timeout`命令进行时限（SB的ChatGPT说`timeout`不能用小数，查了文档是可以用小数的） 

> `system` 返回的参数是 `int`，高八位是调用命令的返回值，低八位是捕获的信号量
> 在C语言中，`system`函数执行外部命令并返回命令的退出状态码。状态码通常是一个整数值，用于指示命令执行的结果。
>
> 状态码由两部分组成，高8位表示命令退出的状态，低8位表示命令退出时的信号。
> 
> 状态部分通常使用以下值：
> - 0：命令成功执行并退出。
> - 非零值：命令执行失败，具体值可能有不同的含义，可以根据具体命令的文档或相关说明进行解释。
> 
> 信号部分表示在命令退出时发送给命令进程的信号值。常见的一些信号值包括：
> - 2（SIGINT）：表示用户发出中断信号（通常是通过键盘按下Ctrl+C）。
> - 9（SIGKILL）：表示强制终止命令的信号。

顺便实现了一个多线程和外部参数定义 


## 2.0 2023/7/13

还是乱七八糟的代码

稍微有点框架了 \
先写了一个比对程序，比对的方式是调用 `timeout 7.0s ./a.out < ./test_data/0001/1.in | ./diffg.out ./test_data/0001/1.ans` 的方式来进行比较 \
用了一个管道，感觉会快一丢丢？ \
把原来的 `judge` 改名成了 `core`，感觉 `core` 作为一个判题核心更好，用来进行一个题的测试，然后再这个题目判定的时候开一堆的线程进行不同测试点的测试。\ 
实际上有点面向对象的意思了，后面打算用C++全部重写一遍。
然后加了一个题目配置，在判题的时候会先读取题目的配置，然后定义一堆初始变量。 \

> 小发现：管道是内存空间，并且管道后的程序是并行的，只是会等待前面的输出


